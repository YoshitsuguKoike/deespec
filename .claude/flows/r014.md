# r014 — Decision Enum + doctor --json Verification

## Summary
- Commit: `48b15f7`
- Version/Tag: `v0.1.12` (planned)
- Verdict: PASS

## Evidence
- Enum check:
  ```
  true
  ```

- doctor --json:
  ```json
  {
    "runner": "launchd",
    "active": true,
    "working_dir": "/Users/yoshitsugukoike/deespec-workdir",
    "agent_bin": "claude",
    "start_interval_sec": 300,
    "errors": []
  }
  ```

- Exit codes:
  - normal: `0`
  - warn (inactive or not set): `2`
  - fatal (no write / agent missing): `1`

## Validation Tests

### Decision Enum
```bash
$ cd /tmp/test-enum
$ jq -s 'map(.decision=="PENDING" or .decision=="NEEDS_CHANGES" or .decision=="OK") | all' journal.ndjson
true
```

### Full Schema Validation
```bash
$ bash verify_journal.sh journal.ndjson
Checking JSON purity... OK
Checking all entries are objects... OK
Checking 7 required keys... OK
Checking artifacts field is array... OK
Checking UTC timestamps... OK
Checking turn consistency in artifacts paths... OK
Checking decision enum values... OK
✅ Journal schema validation PASSED
```

### Doctor --json Output
- All required keys present: runner, active, working_dir, agent_bin, start_interval_sec, errors
- Correct exit code: 0 (active=true, no errors)
- Working directory correctly extracted from launchd plist

## Notes

* CI updated: decision enum step added to verify_journal.sh
* CHANGELOG updated with new features
* Empty decision fields now normalize to "PENDING"
* DEE_VALIDATE=1 triggers enum validation warnings