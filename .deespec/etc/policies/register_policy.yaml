# Register Policy Configuration
# This file controls the behavior of the 'deespec sbi register' command
# CLI options take precedence over this policy file

id:
  pattern: "^[A-Z0-9-]{1,64}$"
  max_len: 64

title:
  max_len: 200
  deny_empty: true

labels:
  pattern: "^[a-z0-9-]+$"
  max_count: 32
  warn_on_duplicates: true

input:
  max_kb: 64  # Maximum input size in kilobytes

slug:
  nfkc: true                      # Apply NFKC normalization
  lowercase: true                 # Convert to lowercase
  allow: "a-z0-9-"               # Allowed characters in slug
  max_runes: 60                  # Maximum length in runes
  fallback: "spec"               # Default if slug becomes empty
  windows_reserved_suffix: "-x"  # Suffix for Windows reserved names
  trim_trailing_dot_space: true  # Remove trailing dots and spaces

path:
  base_dir: ".deespec/specs/sbi"
  max_bytes: 240
  deny_symlink_components: true
  enforce_containment: true

collision:
  default_mode: "error"  # error|suffix|replace
  suffix_limit: 99       # Maximum suffix number for suffix mode

journal:
  record_source: false      # Record input source (stdin/file) in journal
  record_input_bytes: false # Record input size in journal

logging:
  stderr_level_default: "info"  # info|warn|error